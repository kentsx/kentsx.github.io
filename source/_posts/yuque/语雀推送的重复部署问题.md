---
title: 语雀推送的重复部署问题
urlname: wxgtbk
date: '2021-03-26 22:54:53 +0800'
tags:
  - Travis
  - Hexo
categories:
  - 金融狗在假装码农
---

折腾了好长时间，终于明白了为什么我的 Travis 每次在语雀推送之后会部署 2 次的问题的，而且第二次必定失败。

<!-- more --> 

原因就在于，我的推送逻辑，是检测到 blog-source 分支变化，就会激活一次 Travis，那么在把语雀的内容推送的时候，启动了一次 Travis，但我这次的命令里，还有一步是把语雀的内容保存到 blog-source 里，这次保存到 blog-source 分支的时候，对于 Travis 来说，又是一次变化，所以又被激活了第二次！！

出于要保存源码的考虑，所以我这次就调整了一下 Travis 的设置，逻辑就是新建了一个 branch，叫 blog-source-incl-yuque，也就是 blog-source 分支，放的是没有语雀的内容，而新的分支，如其名，就是含语雀内容的 source。
![微信截图_20210326225946.png](https://cdn.nlark.com/yuque/0/2021/png/682563/1616770866096-cd599096-a0ee-4d4c-a330-20eb1c869b31.png#align=left&display=inline&height=176&margin=%5Bobject%20Object%5D&name=%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210326225946.png&originHeight=176&originWidth=1206&size=24671&status=done&style=none&width=1206)
OK，这样下次再有推送的时候，就不会重复启动 Travis 了。
